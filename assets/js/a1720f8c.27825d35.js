"use strict";(self.webpackChunksailpoint_developer_portal=self.webpackChunksailpoint_developer_portal||[]).push([["287378"],{157276:function(e,s,n){n.r(s),n.d(s,{assets:()=>o,contentTitle:()=>a,default:()=>h,frontMatter:()=>l,metadata:()=>t,toc:()=>d});var t=n(909554),i=n(785893),r=n(250065);let l={id:"cli-api",title:"API",pagination_label:"CLI API",sidebar_label:"API",sidebar_position:10,sidebar_class_name:"cli-api",keywords:["cli","cli api","api"],description:"Learn how to use the CLI to make generic api calls in this guide.",slug:"/tools/cli/api",tags:["CLI"]},a=void 0,o={},d=[{value:"Get requests",id:"get-requests",level:2},{value:"Headers",id:"headers",level:3},{value:"Query parameters",id:"query-parameters",level:3},{value:"Multiple query parameters",id:"multiple-query-parameters",level:3},{value:"Post requests",id:"post-requests",level:2},{value:"Patch requests",id:"patch-requests",level:2},{value:"Put requests",id:"put-requests",level:2},{value:"Delete requests",id:"delete-requests",level:2},{value:"Changing commands together",id:"changing-commands-together",level:2}];function c(e){let s={a:"a",admonition:"admonition",code:"code",h2:"h2",h3:"h3",li:"li",p:"p",pre:"pre",ul:"ul",...(0,r.a)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"Learn how to use the SailPoint CLI to make generic API calls in this guide."}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"api"})," command makes it easy to call SailPoint APIs and parse the results using JSONPath queries if needed."]}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#get-requests",children:"get"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#post-requests",children:"post"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#patch-requests",children:"patch"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#put-requests",children:"put"})}),"\n",(0,i.jsx)(s.li,{children:(0,i.jsx)(s.a,{href:"#delete-requests",children:"delete"})}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"get-requests",children:"Get requests"}),"\n",(0,i.jsx)(s.p,{children:"Run this command to get a list of transforms using the v2025 API:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"sail api get /v2025/transforms\n"})}),"\n",(0,i.jsxs)(s.p,{children:["You can filter the results using the ",(0,i.jsx)(s.code,{children:"--jsonpath"})," flag or ",(0,i.jsx)(s.code,{children:"-j"})," for short. The following command returns just the names of the transforms:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api get /v2025/transforms --jsonpath "$.*.name"\n'})}),"\n",(0,i.jsxs)(s.p,{children:["For better readability, you can pretty-print the response using the ",(0,i.jsx)(s.code,{children:"--pretty"})," flag or ",(0,i.jsx)(s.code,{children:"-p"})," for short:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api get /v2025/transforms --jsonpath "$.*.name" --pretty\n'})}),"\n",(0,i.jsx)(s.h3,{id:"headers",children:"Headers"}),"\n",(0,i.jsxs)(s.p,{children:["To include headers with your API call\u2014such as calling an experimental endpoint\u2014use the ",(0,i.jsx)(s.code,{children:"--headers"})," or ",(0,i.jsx)(s.code,{children:"-H"})," flag:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api get /v2025/entitlements/ -H "X-SailPoint-Experimental:true"\n'})}),"\n",(0,i.jsx)(s.h3,{id:"query-parameters",children:"Query parameters"}),"\n",(0,i.jsxs)(s.p,{children:["Use the ",(0,i.jsx)(s.code,{children:"--query"})," or ",(0,i.jsx)(s.code,{children:"-q"})," flag to provide query parameters."]}),"\n",(0,i.jsx)(s.p,{children:"For example, run this command to retrieve a list of entitlements owned by a specific identity:"}),"\n",(0,i.jsx)(s.admonition,{type:"tip",children:(0,i.jsx)(s.p,{children:"Query parameters may need to be escaped depending on their use."})}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api get /v2025/entitlements -q filters="owner.id eq\\"<identity_id>\\"" -H "X-SailPoint-Experimental:true"\n'})}),"\n",(0,i.jsx)(s.h3,{id:"multiple-query-parameters",children:"Multiple query parameters"}),"\n",(0,i.jsxs)(s.p,{children:["The ",(0,i.jsx)(s.code,{children:"--query"})," flag can be used multiple times to provide additional query parameters."]}),"\n",(0,i.jsx)(s.p,{children:"Use the following command to return a single entitlement owned by a specific identity:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api get /v2025/entitlements -q filters="owner.id eq\\"<identity-id>\\"" -q limit=1 -H "X-SailPoint-Experimental:true"\n'})}),"\n",(0,i.jsx)(s.h2,{id:"post-requests",children:"Post requests"}),"\n",(0,i.jsxs)(s.p,{children:["Use the ",(0,i.jsx)(s.code,{children:"post"})," subcommand to create resources."]}),"\n",(0,i.jsx)(s.p,{children:"Run the following command to create a basic transform, passing the request body as a string:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api post /v2025/transforms --body \'{"name":"ToLowerCase","type":"lower","attributes":{}}\'\n'})}),"\n",(0,i.jsxs)(s.p,{children:["Alternatively, use the ",(0,i.jsx)(s.code,{children:"--body-file"})," or ",(0,i.jsx)(s.code,{children:"-f"})," flag to provide the request body from a file:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"sail api post /v2025/transforms --file-body ./transform.json\n"})}),"\n",(0,i.jsx)(s.h2,{id:"patch-requests",children:"Patch requests"}),"\n",(0,i.jsxs)(s.p,{children:["Use the ",(0,i.jsx)(s.code,{children:"patch"})," sub command to update resources."]}),"\n",(0,i.jsx)(s.p,{children:"Run the following command to update the owner of an access profile:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:' sail api patch /v2025/access-profiles/<access-profile-id> --body \'[{"op":"replace","path":"/owner/id","value":"<identity-id>"}]\'\n'})}),"\n",(0,i.jsx)(s.h2,{id:"put-requests",children:"Put requests"}),"\n",(0,i.jsx)(s.p,{children:"Run this command to replace a transform object using the v2025 API:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'sail api put /v2025/transforms/<transform-id> --body \'{"name":"ToLowerCase","type":"lower","attributes":{}}\'\n'})}),"\n",(0,i.jsxs)(s.p,{children:["Use the ",(0,i.jsx)(s.code,{children:"--body-file"})," or ",(0,i.jsx)(s.code,{children:"-f"})," flag to provide the body of the request via a file."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"sail api put /v2025/transforms --file-body ./updated-transform.json\n"})}),"\n",(0,i.jsx)(s.h2,{id:"delete-requests",children:"Delete requests"}),"\n",(0,i.jsx)(s.p,{children:"Use this command to remove resources from Identity Security Cloud."}),"\n",(0,i.jsx)(s.p,{children:"Run the following command to remove a transform from your tenant:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:"sail api delete /v2025/transforms/<transform-id>\n"})}),"\n",(0,i.jsx)(s.h2,{id:"changing-commands-together",children:"Changing commands together"}),"\n",(0,i.jsxs)(s.p,{children:["You can combine the ",(0,i.jsx)(s.code,{children:"--jsonpath"})," flag with tools like ",(0,i.jsx)(s.a,{href:"https://jqlang.org/",children:"jq"})," to chain commands and perform complex operations."]}),"\n",(0,i.jsxs)(s.p,{children:["For example, the following script reassigns roles from one owner to another. It uses ",(0,i.jsx)(s.code,{children:"--jsonpath"})," to extract role IDs owned by the source identity, then updates each role with the new owner using ",(0,i.jsx)(s.code,{children:"sail api patch"}),"."]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-shell",children:'#!/bin/bash\n\nfrom=$1\nto=$2\n\nif [[ -z "$from" || -z "$to" ]]; then\n  echo "Usage: $0 <from> <to>"\n  exit 1\nfi\n\nids=$(sail api get /v2025/roles -q "filters=owner.id eq \\"$from\\"" --jsonpath \'$.*.id\')\n\nfor id in $(echo "$ids" | jq -r \'.[]\'); do\n  echo "Patching role ID: $id"\n  sail api patch /v2025/roles/"$id" \\\n    --body "[{\\"op\\":\\"replace\\",\\"path\\":\\"/owner/id\\",\\"value\\":\\"$to\\"}]"\ndone\n'})})]})}function h(e={}){let{wrapper:s}={...(0,r.a)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(c,{...e})}):c(e)}},250065:function(e,s,n){n.d(s,{Z:()=>a,a:()=>l});var t=n(667294);let i={},r=t.createContext(i);function l(e){let s=t.useContext(r);return t.useMemo(function(){return"function"==typeof e?e(s):{...s,...e}},[s,e])}function a(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(i):e.components||i:l(e.components),t.createElement(r.Provider,{value:s},e.children)}},909554:function(e){e.exports=JSON.parse('{"id":"tools/cli/cli-api","title":"API","description":"Learn how to use the CLI to make generic api calls in this guide.","source":"@site/docs/tools/cli/api.md","sourceDirName":"tools/cli","slug":"/tools/cli/api","permalink":"/docs/tools/cli/api","draft":false,"unlisted":false,"editUrl":"https://github.com/sailpoint-oss/developer.sailpoint.com/edit/main/docs/tools/cli/api.md","tags":[{"inline":true,"label":"CLI","permalink":"/docs/tags/cli"}],"version":"current","lastUpdatedBy":"darrell-thobe-sp","lastUpdatedAt":1746721553000,"sidebarPosition":10,"frontMatter":{"id":"cli-api","title":"API","pagination_label":"CLI API","sidebar_label":"API","sidebar_position":10,"sidebar_class_name":"cli-api","keywords":["cli","cli api","api"],"description":"Learn how to use the CLI to make generic api calls in this guide.","slug":"/tools/cli/api","tags":["CLI"]},"sidebar":"openApiSidebar","previous":{"title":"CLI Workflows","permalink":"/docs/tools/cli/workflow"},"next":{"title":"CLI JSONpath","permalink":"/docs/tools/cli/jsonpath"}}')}}]);